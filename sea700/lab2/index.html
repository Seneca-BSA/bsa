<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Lab 2 : ROS Nodes, Topics, Services, Parameters, Actions - BSA Lab Manuals</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Lab 2 : ROS Nodes, Topics, Services, Parameters, Actions";
        var mkdocs_page_input_path = "sea700/lab2.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> BSA Lab Manuals
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Lab Manuals</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../ses250/">SES250 Electromagnatics</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../seh500/">SEH500 Microprocessors</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../sep600/">SEP600 Embedded Systems</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../">SEA700 Robotics</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">BSA Lab Manuals</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Lab 2 : ROS Nodes, Topics, Services, Parameters, Actions</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="lab-2-ros-nodes-topics-services-parameters-actions">Lab 2 : ROS Nodes, Topics, Services, Parameters, Actions</h1>
<p><font size="5">
Seneca Polytechnic</br>
SEA700 Robotics for Software Engineers
</font></p>
<h2 id="introduction">Introduction</h2>
<p>A overview of some computation graph concepts:
- <strong>Node:</strong> an executable representing an individual ROS software process
- <strong>Topic:</strong> nodes can publish messages to a topic and/or subscribe to a topic to receive messages
- <strong>Message:</strong> a ROS datatype used to exchange data between nodes</p>
<h3 id="nodes-in-ros">Nodes in ROS</h3>
<p>Each node in ROS should be responsible for a single, modular purpose, ie. controlling the wheel motors or publishing the sensor data from a laser range-finder. Each node can send and receive data from other nodes via topics, services, actions, or parameters. A full robotic system is comprised of many nodes working in concert.</p>
<p><img alt="Figure 2.1 ROS Nodes Graph" src="../lab2-nodes-graph.gif" /></p>
<p><em><strong>Figure 2.1</strong> ROS Nodes Graph</em></p>
<h3 id="topics-in-ros">Topics in ROS</h3>
<p>ROS 2 breaks complex systems down into many modular nodes. Topics are a vital element of the ROS graph that act as a bus for nodes to exchange messages.</p>
<p><img alt="Figure 2.2 ROS Topic Graph" src="../lab2-topics-graph-1.gif" /></p>
<p><em><strong>Figure 2.2</strong> ROS Topic Graph</em></p>
<p>A node may publish data to any number of topics and simultaneously have subscriptions to any number of topics.</p>
<p><img alt="Figure 2.3 ROS Topic Graph (One-to-Many)" src="../lab2-topics-graph-2.gif" /></p>
<p><em><strong>Figure 2.3</strong> ROS Topic Graph (One-to-Many)</em></p>
<p>Topics are one of the main ways in which data is moved between nodes and therefore between different parts of the system.</p>
<h2 id="procedures">Procedures</h2>
<h3 id="understand-ros-nodes">Understand ROS Nodes</h3>
<ol>
<li>
<p>Open a terminal to run turtlesim. The command <code>ros2 run</code> launches an executable from a package.</p>
<pre><code>ros2 run &lt;package_name&gt; &lt;executable_name&gt;
</code></pre>
<p>We need the package name to be <code>turtlesim</code> and the executable name to be <code>turtlesim_node</code>.</p>
<pre><code>ros2 run turtlesim turtlesim_node
</code></pre>
</li>
<li>
<p>To find the node names, the <code>ros2 node list</code> can be used. <code>ros2 node list</code> will show you the names of all running nodes. This is especially useful when you want to interact with a node, or when you have a system running many nodes and need to keep track of them.</p>
<p>Open a new terminal while <code>/turtlesim</code> is still running and enter the following command:</p>
<pre><code>ros2 node list
</code></pre>
<p>The terminal will return the node name:</p>
<pre><code>/turtlesim
</code></pre>
</li>
<li>
<p>Open another new terminal and start the teleop node with the command:</p>
<pre><code>ros2 run turtlesim turtle_teleop_key
</code></pre>
</li>
<li>
<p>Return to the terminal where you ran <code>ros2 node list</code> and run it again. You will now see the names of two active nodes:</p>
<pre><code>/turtlesim
/teleop_turtle
</code></pre>
</li>
<li>
<p><a href="https://design.ros2.org/articles/ros_command_line_arguments.html#name-remapping-rules">Remapping</a> allows you to reassign default node properties, like node name, topic names, service names, etc., to custom values. Letâ€™s open another <code>/turtlesim</code> node and reassign the name to <code>/my_turtle</code>. In a new terminal, run the following command:</p>
<pre><code>ros2 run turtlesim turtlesim_node --ros-args --remap __node:=my_turtle
</code></pre>
</li>
<li>
<p>Return to the terminal where you ran <code>ros2 node list</code>, and run it again, you will see three node names:</p>
<pre><code>/my_turtle
/turtlesim
/teleop_turtle
</code></pre>
</li>
<li>
<p>To access more information about a node, use the following command:</p>
<pre><code>ros2 node info &lt;node_name&gt;
</code></pre>
<p>To examine your latest node, <code>my_turtle</code>, run the following command:</p>
<pre><code>ros2 node info /my_turtle
</code></pre>
<p><code>ros2 node info</code> returns a list of subscribers, publishers, services, and actions. i.e. the ROS graph connections that interact with that node. The output should look like this:</p>
<pre><code>/my_turtle
  Subscribers:
    /parameter_events: rcl_interfaces/msg/ParameterEvent
    /turtle1/cmd_vel: geometry_msgs/msg/Twist
  Publishers:
    /parameter_events: rcl_interfaces/msg/ParameterEvent
    /rosout: rcl_interfaces/msg/Log
    /turtle1/color_sensor: turtlesim/msg/Color
    /turtle1/pose: turtlesim/msg/Pose
  Service Servers:
    /clear: std_srvs/srv/Empty
    /kill: turtlesim/srv/Kill
    /my_turtle/describe_parameters: rcl_interfaces/srv/DescribeParameters
    /my_turtle/get_parameter_types: rcl_interfaces/srv/GetParameterTypes
    /my_turtle/get_parameters: rcl_interfaces/srv/GetParameters
    /my_turtle/list_parameters: rcl_interfaces/srv/ListParameters
    /my_turtle/set_parameters: rcl_interfaces/srv/SetParameters
    /my_turtle/set_parameters_atomically: rcl_interfaces/srv/SetParametersAtomically
    /reset: std_srvs/srv/Empty
    /spawn: turtlesim/srv/Spawn
    /turtle1/set_pen: turtlesim/srv/SetPen
    /turtle1/teleport_absolute: turtlesim/srv/TeleportAbsolute
    /turtle1/teleport_relative: turtlesim/srv/TeleportRelative
  Service Clients:

  Action Servers:
    /turtle1/rotate_absolute: turtlesim/action/RotateAbsolute
  Action Clients:
</code></pre>
</li>
<li>
<p>Run the same comand on the <code>/teleop_turtle</code> node and see the difference.</p>
</li>
</ol>
<h3 id="complete-the-following-tutorials">Complete the following tutorials</h3>
<ol>
<li><a href="https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Topics/Understanding-ROS2-Topics.html">Understanding topics</a></li>
<li><a href="https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Services/Understanding-ROS2-Services.html">Understanding services</a></li>
<li><a href="https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Parameters/Understanding-ROS2-Parameters.html">Understanding parameters</a></li>
<li><a href="https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Actions/Understanding-ROS2-Actions.html">Understanding actions</a></li>
<li><a href="https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Launching-Multiple-Nodes/Launching-Multiple-Nodes.html">Launching nodes</a></li>
<li><a href="https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Actions/Understanding-ROS2-Actions.html">Understanding actions</a></li>
<li><a href="https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Recording-And-Playing-Back-Data/Recording-And-Playing-Back-Data.html">Recording and playing back data</a></li>
</ol>
<h2 id="lab-question">Lab Question</h2>
<ol>
<li>Create a recording of a turtle performing a "Figure 8" path and play it back.</li>
</ol>
<p>Once you've completed all the above steps, ask the lab professor or instructor over and demostrate that you've completed the lab and written down all your observations. You might be asked to explain some of the concepts you've learned in this lab.</p>
<h2 id="reference">Reference</h2>
<ul>
<li><a href="https://docs.ros.org/en/humble/index.html">ROS 2 Documentation: Humble</a></li>
<li>EECS 106A Labs</li>
</ul>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
